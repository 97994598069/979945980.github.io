使用背景：
使用于公司测试环境的：如果不配置dns则需要配置本地hosts或者使用ip:port的方式
无论哪一种都很不方便；需要使用测试的域名来进行测试

本地ip:192.168.2.68   centos7.6
yum install dnsmasq -y 

vi /etc/dnsmasq.conf
echo "192.168.2.68 aaa.bbb.com" >> /etc/hosts
echo "nameserver 192.168.2.68" > /etc/resolv.conf

sed -i 's!#listen-address=.*!listen-address=192.168.2.68!g' /etc/dnsmasq.conf  ##建议手改

service dnsmasq restart

确定是否启动成功；若失败自行排查
netstat -tupnl|grep dnsmasq
ps -ef |grep dnsmasq


使用：
增加解析
echo "address=/dev.chinabim.com/192.168.2.64" >> /etc/dnsmasq.conf    
echo "address=/devnews.chinabim.com/192.168.2.64" >> /etc/dnsmasq.conf
echo "address=/devnew.chinabim.com/192.168.2.64" >> /etc/dnsmasq.conf
echo "address=/devbaike.chinabim.com/192.168.2.189" >> /etc/dnsmasq.conf
echo "address=/devapi.baike.chinabim.com/192.168.2.189" >> /etc/dnsmasq.conf
echo "address=/devadmin.jinyoujia.net/192.168.2.47" >> /etc/dnsmasq.conf

service dnsmasq restart
##备注:需要防火墙放开53端口和关闭selconfig




客户端配置：
Linux客户端使用：  ##注意上下顺序  同windows
[root@localhost ~]# cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 192.168.2.68
nameserver $ip  ##原先的公网的dns


windows用户： ##注意顺序
更改网络适配器ipv4
首选DNS服务器：192.168.2.68
备用DNS服务器: $ip  ##原先的公网dns







